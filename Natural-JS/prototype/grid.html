<div id="grid">
	<div class="divBar">DATA</div>
	<div class="dataBox">
		<textarea id="data" class="data">
[
  {
    "_id": "53e21cba9f982281b3459438",
    "index": 0,
    "guid": "1a9e5450-c664-4bfd-8174-d03005eca08d",
    "isActive": "Y",
    "balance": "$1,284.38",
    "picture": "http://placehold.it/32x32",
    "age": 26,
    "eyeColor": "green",
    "name": "Dean Stanley",
    "gender": "male",
    "company": "ZENTIA",
    "email": "deanstanley@zentia.com",
    "phone": "+1 (920) 409-2680",
    "address": "936 Meserole Street, Vicksburg, Massachusetts, 1198",
    "about": "Mollit elit qui reprehenderit fugiat excepteur adipisicing sunt id proident laborum sint proident. Amet cupidatat ipsum do irure qui magna sunt pariatur commodo eiusmod ipsum qui ad culpa. Nisi tempor cupidatat do tempor reprehenderit irure consectetur cupidatat deserunt fugiat. Ipsum sint id ipsum voluptate duis laboris esse sunt nisi mollit dolore cupidatat.\r\n",
    "registered": "2014-02-20T03:58:09 -09:00",
    "latitude": 81.131606,
    "longitude": 87.110498,
    "greeting": "Hello, Dean Stanley! You have 1 unread messages.",
    "favoriteFruit": "strawberry"
  },.............
		</textarea>
	</div>
	<div class="divBar">DEMO</div>
	<div class="demoBox">
		<div id="firstBtnBox" class="btnBox">
			<a id="btnInitGrid" href="#" class='{ "color": "skyblue", "size": "small" }'>init grid</a>
			<a id="btnBindData" href="#" class='{ "color": "skyblue", "size": "small", "disable": true }'>bind data</a>
			<a id="btnGetData" href="#" class='{ "color": "skyblue", "size": "small", "disable": true }'>get data</a>
			<a id="btnRevert" href="#" class='{ "color": "skyblue", "size": "small", "disable": true }'>data revert</a>
			<a id="btnGetVal" href="#" class='{ "color": "skyblue", "size": "small", "disable": true }'>get value</a>
			<a id="btnChangeVal" href="#" class='{ "color": "skyblue", "size": "small", "disable": true }'>change value</a>
			<a id="btnAdd" href="#" class='{ "color": "skyblue", "size": "small", "disable": true }'>add new row</a>
			<a id="btnDelete" href="#" class='{ "color": "skyblue", "size": "small", "disable": true }'>delete 4th row</a>
			<a id="btnValidate" href="#" class='{ "color": "skyblue", "size": "small", "disable": true }'>all row data validate</a>
		</div>
		<table id="grid" class="grid__">
			<thead>
				<tr>
					<th width="40">index</th>
					<th width="50">picture</th>
					<th width="110">name</th>
					<th width="130">email</th>
					<th width="50">gender</th>
					<th width="60">eyeColor</th>
					<th width="40">age</th>
					<th width="*">company</th>
					<th width="60">isActive</th>
				</tr>
			</thead>
			<tbody class='{ "rowHandler" : "N(\"div#grid\").instance(\"service\").rowHandler" }'>
				<tr>
					<td id="index" align="center"></td>
					<td align="center"><img id="picture" height="16" /></td>
					<td id="name"></td>
					<td><input id="email" type="text" class='{ "validate" : [["required"], ["email"]] }' /></td>
					<td id="gender" align="center"></td>
					<td><input id="eyeColor" type="text" /></td>
					<td><input id="age" type="text" class='{ "validate" : [["required"], ["integer"]] }' /></td>
					<td><input id="company" type="text" /></td>
					<td align="center"><input id="isActive" type="checkbox" /></td>
				</tr>
			</tbody>
		</table>

		<br />

		<div id="secondBtnBox" class="btnBox">
			<a id="btnInitGrid2" href="#" class='{ "color": "skyblue", "size": "small" }'>init grid2</a>
			<a id="btnBindData2" href="#" class='{ "color": "skyblue", "size": "small", "disable": true }'>bind data</a>
		</div>
		<table id="grid2" class="grid__">
			<thead>
				<tr>
					<th width="70" rowspan="2">picture</th>
					<th width="70">index</th>
					<th width="120">name</th>
					<th width="*">email</th>
					<th width="60">gender</th>
				</tr>
				<tr>
					<th>eyeColor</th>
					<th>age</th>
					<th>company</th>
					<th>isActive</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td align="center" rowspan="2"><img id="picture" height="32" /></td>
					<td id="index" align="center"></td>
					<td id="name"></td>
					<td><input id="email" type="text" class='{ "validate" : [["required"], ["email"]] }' /></td>
					<td id="gender" align="center"></td>
				</tr>
				<tr>
					<td><input id="eyeColor" type="text" /></td>
					<td><input id="age" type="text" class='{ "validate" : [["required"], ["integer"]] }' /></td>
					<td><input id="company" type="text" /></td>
					<td align="center"><input id="isActive" type="checkbox" /></td>
				</tr>
			</tbody>
		</table>
	</div>

	<div class="divBar">SOURCE CODE</div>
	<div class="sourceBox">
	</div>
</div>

<script type="text/javascript">

N("div#grid").service({
	grid : undefined,
	grid2 : undefined,
	gridData : undefined,
    init : function(view, request) {
    	// put source code
    	IndexServiceController.getSourceCode(request.get("url"), N("div.sourceBox"));

    	this.initButton();
    	//this.createSelect(data);

    	// data load
    	var this_ = this;
    	N.controller({
    		url : "prototype/data/grid.json",
    		async : false
    	}).submit(function(data) {
    		this_.gridData = data;
    	});

    	this.setEvents();
    },
    createSelect : function(data) {
    	// $(data).select("select#select").bind();
    },
    initButton : function() {
    	N("div.btnBox").button();
    },
    setEvents : function() {
    	var this_ = this;

    	N("a#btnInitGrid").click(function(e) {
            e.preventDefault();
            if(this_.grid === undefined) {
            	this_.grid = N([]).grid({
            		context :"table#grid",
            		data : this_.gridData,
            		height : 300,
            		resizable : true,
            		vResizable : true,
            		sortable : true
            	});

                N("div#firstBtnBox").find("a").instance("button", function(u) {
                	if(this.context().is("a#btnInitGrid")) {
	    				this.disable();
	    			} else {
	                 	this.enable();
	    			}
                });
            }
        });

    	N("a#btnBindData").click(function(e) {
            e.preventDefault();
            this_.grid.bind();
        });

    	N("a#btnGetData").click(function(e) {
            e.preventDefault();
           	N(window).alert(JSON.stringify(this_.grid.data()[0])).show();
        });

    	N("a#btnRevert").click(function(e) {
            e.preventDefault();
       		this_.grid.revert();
        });

    	N("a#btnGetVal").click(function(e) {
            e.preventDefault();
            this_.grid.context().parent().alert(this_.grid.val(1, "name")).show();
        });

    	N("a#btnChangeVal").click(function(e) {
            e.preventDefault();
       		this_.grid.val(1, "name", "빨간짜장면");
        });

    	N("a#btnAdd").click(function(e) {
            e.preventDefault();
        	this_.grid.add();
        });

    	N("a#btnDelete").click(function(e) {
            e.preventDefault();
        	this_.grid.remove(3);
        });

    	N("a#btnValidate").click(function(e) {
            e.preventDefault();
            this_.grid.context().parent().alert(String(this_.grid.validate()));
        });

    	N("a#btnInitGrid2").click(function(e) {
            e.preventDefault();
            if(this_.grid2 === undefined) {
            	this_.grid2 = N([]).grid({
            		context :"table#grid2",
            		data : this_.gridData,
            		height : 300,
            		resizable : true,
            		vResizable : true,
            		sortable : true
            	});

				N("div#secondBtnBox").find("a").instance("button", function(u) {
					if(this.context().is("a#btnInitGrid2")) {
	    				this.disable();
	    			} else {
	                 	this.enable();
	    			}
				});
            }
        });

    	N("a#btnBindData2").click(function(e) {
            e.preventDefault();
       		this_.grid2.bind();
        });
    },
    rowHandler : function(i, tbody, vals) {
    	if(i%2 === 1){
    		tbody.find("td#index").css("cursor", "pointer").click(function() {
    			tbody.alert({
    				title : "홀수 인덱스",
    				msg : '<textarea class="data" style="width:300px;height:150px;margin:0;">' + N.json.format(JSON.stringify(vals)) + '</textarea>'
    			}).show();
    		});
    	} else {
    		tbody.find("td#index").css("cursor", "pointer").click(function() {
    			tbody.alert({
    				title : "짝수 인덱스",
    				msg : '<textarea class="data" style="width:300px;height:150px;margin:0;">' + N.json.format(JSON.stringify(vals)) + '</textarea>'
    			}).show();
    		});
    	}
    }
});

</script>