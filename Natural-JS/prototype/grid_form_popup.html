<div id="gridFormPopup">
	<div class="intro">
		<h1>Grid 와 Form, Popup 이 결합된 형태의 예제 입니다.</h1>
		<h2>그리드의 행을 클릭하면 클릭한 행의 데이터가 바인드된 폼이 팝업 으로 표시 됩니다.</h2>
	</div>
	<div class="divBar">DATA</div>
	<div class="dataBox">
		/Natural-JS/prototype/data/grid_big.json
	</div>
	<div class="divBar">DEMO</div>
	<div class="demoBox">
		<div id="defBtnBox" class="btnBox" align="right">
			<a id="btnBind" href="#" class='{ "color": "skyblue", "size": "large" }'>bind</a>
			<a id="btnModifiedData" href="#" class='{ "color": "skyblue", "size": "large" }'>get modified data</a>
		</div>
		<table id="grid" class="grid__">
			<thead>
				<tr>
					<th width="40">index</th>
					<th width="50">picture</th>
					<th width="110">name</th>
					<th width="130">email</th>
					<th width="50">gender</th>
					<th width="60">eyeColor</th>
					<th width="40">age</th>
					<th width="*">company</th>
					<th width="60">isActive</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td id="index" align="center"></td>
					<td align="center"><img id="picture" height="16" /></td>
					<td id="name"></td>
					<td id="email"></td>
					<td id="gender" align="center"></td>
					<td id="eyeColor" align="center"></td>
					<td id="age"></td>
					<td id="company"></td>
					<td id="isActive" align="center"></td>
				</tr>
			</tbody>
		</table>

		<table id="form" class='form' title="입력 폼">
			<tr>
				<th width="85" align="right"><label for="picture">picture</label></th>
				<td width="*"><img id="picture" /></td>
			</tr>
			<tr>
				<th align="right"><label for="name">name</label></th>
				<td>
					<input id="name" type="text" class='{ "validate" : [["required"]] }' />
				</td>
			</tr>
			<tr>
				<th align="right"><label for="email">email</label></th>
				<td>
					<input id="email" type="text" class='{ "format" : [["trimtoempty"], ["generic", "@@@@@@＊＊＊"]], "validate" : [["required"], ["email"]] }' />
				</td>
			</tr>
			<tr>
				<th align="right"><label for="_id">password</label></th>
				<td>
					<input id="_id" type="password" class='{ "validate" : [["required"]] }' />
				</td>
			</tr>
			<tr>
				<th align="right"><label for="balance">balance</label></th>
				<td>
					<input id="balance" type="text" class='{ "format" : [["trimtoempty"], ["numeric", "$#,###.##0"]], "validate" : [["required"], ["decimal"]] }' />
				</td>
			</tr>
			<tr>
				<th align="right"><label for="phone">phone</label></th>
				<td>
					<input id="phone" type="text" readonly="readonly" />
				</td>
			</tr>
			<tr>
				<th align="right"><label for="age">age</label></th>
				<td>
					<input id="age" type="text" disabled="disabled" />
					<input id="index" type="hidden" />
				</td>
			</tr>
			<tr>
				<th align="right"><label for="registered">registered</label></th>
				<td>
					<input id="registered" type="text" class='{ "format": [["date", 8, "date"]], "validate" : [["required"]] }' />
				</td>
			</tr>
			<tr>
				<th align="right"><label for="about">about</label></th>
				<td>
					<textarea id="about" rows="5" cols="80" class='{ "format" : [["trimtoempty"], ["limit", "50", "..."]], "validate" : [["required"], ["korean"]] }'></textarea>
				</td>
			</tr>
			<tr>
				<th align="right"><label for="greeting">about</label></th>
				<td id="greeting"></td>
			</tr>
			<tr>
				<th align="right"><label for="isActive">isActive</label></th>
				<td>
					<input id="isActive" type="checkbox" />
				</td>
			</tr>
		</table>
	</div>

	<div class="divBar">SOURCE CODE</div>
	<div class="sourceBox">
	</div>
</div>

<script type="text/javascript">

N("div#gridFormPopup").sc({
	grid : undefined,
    init : function(view, request) {
    	// put source code
    	IndexServiceController.getSourceCode(request.get("url"), N("div.sourceBox"));

    	this.initButton();
    	//this.createSelect(data);

    	var popup = N("table#form").popup();

    	var form = N([]).form("table#form").bind();

    	this.grid = N([]).grid({
       		context :"table#grid",
       		height : 350,
       		resizable : true,
       		sortable : true,
       		select : true,
       		hover : true,
       		onSelect : function(i, ele, data) {
       			form.bind(i, data);
       			popup.open();
       		}
       	});

    	this.setEvents(this);

    	N("a#btnBind").click();
    },
    initButton : function() {
    	N("div.btnBox").button();
    },
    setEvents : function(this_) {
    	N("a#btnBind").click(function(e) {
            e.preventDefault();
            N.c({
        		url : "prototype/data/grid_big.json",
        		async : false
        	}).submit(function(data) {
        		this_.grid.bind(data);
        	});
        });

    	N("a#btnModifiedData").click(function(e) {
    		e.preventDefault();
    		N("div.demoBox").alert({
    			title : "수정된 ROW DATA",
    			msg : '<div class="pre">' + N.json.format(this_.grid.data("modified")) + '</div>',
    			width : 550,
    			height : 300
    		}).show();
    	});
    }
});
</script>