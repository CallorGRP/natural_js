<article id="grid">
	<p class="smallContTit">Data :</p>
	<div class="dataBox">
		/natural_js/html/apid/data/grid.json
	</div>
	<p class="smallContTit">Default options : </p>
	<table class="form">
		<tr>
			<th width="10%" align="right">context</th>
			<td width="40%"><input id="context" type="text" value="table#grid" readonly="readonly" /> Target element</td>
			<th width="10%" align="right">height</th>
			<td width="40%" style="background-color: #efffff;"><input id="height" type="text" value="395" /> </td>
		</tr>
		<tr>
			<th>validate</th>
			<td><input id="validate" type="checkbox" checked="checked" /> If this checkbox with uncheck(false), disable realtime validation check</td>
			<th>html</th>
			<td><input id="html" type="checkbox" /> If this checkbox with check(true), do not recognize HTML tags</td>
		</tr>
		<tr>
			<th>addTop</th>
			<td><input id="addTop" type="checkbox" /> If this checkbox with check(true), create new row on the top by add method
				<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="red">* If height is greater than 0, addTop option is always set with "true"</font>
			</td>
			<th>resizable</th>
			<td><input id="resizable" type="checkbox" /> If this checkbox with check(true), can resize column of grid</td>
		</tr>
		<tr>
			<th>vResizable</th>
			<td style="background-color: #efffff;"><input id="vResizable" type="checkbox" /> If this checkbox with check(true), can resize height of grid body</td>
			<th>sortable</th>
			<td><input id="sortable" type="checkbox" /> If this checkbox with check(true), enable column sort</td>
		</tr>
		<tr>
			<th>select</th>
			<td><input id="select" type="checkbox" /> If this checkbox with check(true), can select only 1 row in grid body</td>
			<th>multiselect</th>
			<td><input id="multiselect" type="checkbox" /> If this checkbox with check(true), can select multy row in grid body</td>
		</tr>
		<tr>
			<th>hover</th>
			<td><input id="hover" type="checkbox" /> If this checkbox with check(true), display hover effect</td>
			<th>createRow<br>Delay</th>
			<td><input id="createRowDelay" type="text" value="1" /> delay whenever created row element</td>
		</tr>
		<tr>
			<th>scrollPaging<br>.size</th>
			<td><input id="scrollPagingSize" type="text" value="100" /> scroll paging size</td>
			<th>rowHandler</th>
			<td><textarea id="rowHandler" style="height: 82px;">function(index, row, data) {
	N.log(index);
	N.log(row);
	N.log(data);
}</textarea><br /> Callback function for tab active event</td>
		</tr>
		<tr>
			<th>onSelect</th>
			<td><textarea id="onSelect" style="height: 82px;">function(index, row, data) {
	N.log(index);
	N.log(row);
	N.log(data);
}</textarea><br /> Callback function for tab active event</td>
			<th>onBind</th>
			<td><textarea id="onBind" style="height: 64px;">function(context, data) {
	N.log(context);
	N.log(data);
}</textarea><br /> Callback function for tab active event</td>
		</tr>
		<tr>
			<th>windowScroll Lock</th>
			<td><input id="windowScrollLock" type="checkbox" /> If this checkbox with check(true), block window scroll when mouse scrolling in grid</td>
			<th>revert</th>
			<td><input id="revert" type="checkbox" checked="checked" /> If this checkbox with check(true), activate the revert function(default value is false)</td>
		</tr>
	</table>

	<p class="smallContTit">Method options : </p>
	<table class="form">
		<tr>
			<th width="10%" rowspan="3">val</th>
			<th width="10%">arguments[0]</th>
			<td width="80%" colspan="3">
				<input id="row" type="text" value="0" /> Target row
			</td>
		</tr>
		<tr>
			<th width="10%">arguments[1]</th>
			<td width="80%" colspan="3">
				<input id="key" type="text" value="company" /> Target key name
			</td>
		</tr>
		<tr>
			<th width="10%">arguments[2]</th>
			<td width="80%" colspan="3">
				<input id="val" type="text" value="NATURAL COMPANY" /> If empty value set, get value of key, otherwise set with this value
			</td>
		</tr>
		<tr>
			<th width="10%">data</th>
			<th width="10%">arguments[0]</th>
			<td width="80%" colspan="3">
				<select id="data">
					<option value="modified">modified</option>
					<option value="insert">insert</option>
					<option value="update">update</option>
					<option value="delete">delete</option>
					<option value="">all</option>
				</select> row status
			</td>
		</tr>
		<tr>
			<th width="10%">revert</th>
			<th width="10%">arguments[0]</th>
			<td width="80%" colspan="3">
				<input id="rvtRow" type="text" value="0" /> Row index to revert, if set empty value, revert all row data
			</td>
		</tr>
		<tr>
			<th width="10%">remove</th>
			<th width="10%">arguments[0]</th>
			<td width="80%" colspan="3">
				<input id="rmvRow" type="text" value="0" /> Row index of to remove
			</td>
		</tr>
		<tr>
			<th width="10%">validate</th>
			<th width="10%">arguments[0]</th>
			<td width="80%" colspan="3">
				<input id="vldRow" type="text" value="0" /> Row index of to validate, if set empty value, validate all row data
			</td>
		</tr>
	</table>

	<div align="center" class="btnBox">
		<a id="btnInit" href="#" data-opts='{ "color": "gray", "size": "large" }'>Initialize grid</a>
		<a id="btnAdd" href="#" data-opts='{ "color": "skyblue", "size": "large", "disable": true }'>add</a>
		<a id="btnBind" href="#" data-opts='{ "color": "skyblue", "size": "large", "disable": true }'>bind</a>
		<a id="btnRevert" href="#" data-opts='{ "color": "skyblue", "size": "large", "disable": true }'>revert</a>
		<a id="btnRemove" href="#" data-opts='{ "color": "skyblue", "size": "large", "disable": true }'>remove</a>
		<a id="btnVal" href="#" data-opts='{ "color": "skyblue", "size": "large", "disable": true }'>val</a>
		<a id="btnData" href="#" data-opts='{ "color": "skyblue", "size": "large", "disable": true }'>data</a>
		<a id="btnValidate" href="#" data-opts='{ "color": "skyblue", "size": "large", "disable": true }'>validate</a>
		<a id="btnReload" href="#" data-opts='{ "color": "white", "size": "large" }'>Reload this block page</a>
	</div>

	<p class="smallContTit">Result : </p>
	<table id="grid" class="grid" style="width: 100%;">
		<thead>
			<tr>
				<th style="width: 15%;" rowspan="2">picture</th>
				<th style="width: 15%;">eyeColor</th>
				<th style="width: 20%;">name</th>
				<th style="width: auto;">company</th>
				<th style="width: 15%;">gender</th>
			</tr>
			<tr>
				<th>index</th>
				<th>age</th>
				<th>email</th>
				<th>isActive</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td align="center" rowspan="2"><img id="picture" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D" height="32" /></td>
				<td><input id="eyeColor" type="text" /></td>
				<td id="name"></td>
				<td><input id="company" type="text" /></td>
				<td id="gender" align="center"></td>
			</tr>
			<tr>
				<td id="index" align="center"></td>
				<td><input id="age" type="text" data-validate='[["required"], ["integer"]]' /></td>
				<td><input id="email" type="text" data-validate='[["required"], ["email"]]' /></td>
				<td align="center"><input id="isActive" type="checkbox" /></td>
			</tr>
		</tbody>
	</table>

	<p class="smallContTit">Source Code :</p>
	<pre class="line-numbers"><code id="sourceCode" class="language-markup"></code></pre>
</article>

<script type="text/javascript">
	N("article#grid").cont({
		grid : undefined,
		gridData : undefined,
	    init : function(view, request) {
	    	// source Code
	    	N.comm({
	       		url : "html/apid/" + view.attr("id") + ".html",
	       		dataType : "html"
	       	}).submit(function(html) {
	       		N("#sourceCode", view).text(html);
	       	});

	    	// initialize buttons in div.btnBox
	    	N("div.btnBox a", view).button();

	    	// bind events
	    	this.setEvents(view, this);
	    },
	    setEvents : function(view, this_) {
	    	var grid;
	    	N("#btnInit", view).click(function(e) {
	            e.preventDefault();
	       		var opts = {
	       			context : view.find(N("input#context", view).val()),
	       			height : parseInt(N.string.trimToZero(N("input#height", view).val())),
	       			validate : N("input#validate", view).is(":checked"),
	       			html : N("input#html", view).is(":checked"),
	       			addTop : N("input#addTop", view).is(":checked"),
	       			resizable : N("input#resizable", view).is(":checked"),
	       			vResizable : N("input#vResizable", view).is(":checked"),
	       			sortable : N("input#sortable", view).is(":checked"),
	       			select : N("input#select", view).is(":checked"),
	       			multiselect : N("input#multiselect", view).is(":checked"),
	       			hover : N("input#hover", view).is(":checked"),
	       			createRowDelay : N.string.trimToNull(N("input#createRowDelay", view).val()) !== null ?
	       				parseInt(N("input#createRowDelay", view).val()) : 1,
	       			scrollPaging : {
	       				size : N.string.trimToNull(N("input#scrollPagingSize", view).val()) !== null ?
	       					parseInt(N("input#scrollPagingSize", view).val()) : 100
	       			},
	       			rowHandler : N.string.trimToNull(N("textarea#rowHandler", view).val()) !== null ?
	       				eval("(" + N("textarea#rowHandler", view).val() + ")") : null,
	    				onSelect : N.string.trimToNull(N("textarea#onSelect", view).val()) !== null ?
	        				eval("(" + N("textarea#onSelect", view).val() + ")") : null,
	        			onBind : N.string.trimToNull(N("textarea#onBind", view).val()) !== null ?
	        				eval("(" + N("textarea#onBind", view).val() + ")") : null,
	        		windowScrollLock : N("input#windowScrollLock", view).is(":checked"),
	        		revert : N("input#revert", view).is(":checked")
	       		}

	       		grid = N([]).grid(opts).bind();

	       		N("#btnAdd", view).instance("button").enable();
	            N("#btnBind", view).instance("button").enable();

	            N("#btnInit", view).instance("button").disable();
	        });

	    	N("#btnAdd", view).click(function(e) {
	            e.preventDefault();
	        	grid.add();

	        	N("div.btnBox", view).find("a").instance("button", function(u) {
	            	if(!this.context().is("#btnAdd") && !this.context().is("#btnBind")) {
	            		if(this.context().is("a#btnInit")) {
	    					this.disable();
	    				} else {
	    					this.enable();
	    				}
	            	}
				});
	        });

	    	N("#btnBind", view).click(function(e) {
	            e.preventDefault();
	            N.comm("html/apid/data/grid.json").submit(function(data) {
	            	grid.bind(data);
		       	});

	            N("div.btnBox", view).find("a").instance("button", function(u) {
	            	if(!this.context().is("#btnAdd") && !this.context().is("#btnBind")) {
	            		if(this.context().is("a#btnInit")) {
	    					this.disable();
	    				} else {
	    					this.enable();
	    				}
	            	}
				});
	        });

	    	N("#btnRevert", view).click(function(e) {
	            e.preventDefault();
	       		grid.revert(N.string.trimToUndefined(N("input#rvtRow", view).val()));
	        });

	    	N("#btnRemove", view).click(function(e) {
	            e.preventDefault();
	        	grid.remove(parseInt(N.string.trimToZero(N("input#rmvRow", view).val())));
	        });

	    	N("#btnVal", view).click(function(e) {
	            e.preventDefault();
	            var row = N.string.trimToZero(N("input#row", view).val());
	            var key = N.string.trimToNull(N("input#key", view).val());
	            var value = N.string.trimToNull(N("input#val", view).val());
	        	if(value !== null) {
	        		grid.val(row, key, value);
	        	} else {
	        		grid.context().parent().alert(grid.val(row, key)).show();
	        	}
	        });

	    	N("#btnData", view).click(function(e) {
	    		e.preventDefault();
	    		grid.context().parent().alert({
	        		msg : '<div class="pre">' + N.json.format(grid.data(N.string.trimToUndefined(N("select#data", view).val()))) + '</div>',
	        		width : 400,
	        		height : 250
	        	}).show();
	        });

	    	N("#btnValidate", view).click(function(e) {
	            e.preventDefault();
	            grid.context().parent().alert(String(grid.validate(N.string.trimToUndefined(N("input#vldRow", view).val())))).show();
	        });

	    	N("#btnReload", view).click(function(e) {
	        	e.preventDefault();
	        	N(view.parent()).comm(this_.request.get("url")).submit();
	        });
	    }
	});
</script>