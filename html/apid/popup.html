<article id="popup" class="view-code">
	<h4>1) Create popup in this page element</h4>

	<p class="smallContTit">Default options : </p>
	<table id="localPage" class="form">
		<tr>
			<th>context</th>
			<td colspan="3"><input id="context" type="text" value="table#loginForm" /> jQuery selector</td>
		</tr>
		<tr>
			<th width="10%">title</th>
			<td width="40%"><input id="title" type="text" value="Popup test" />
				<br />&nbsp;this is also possible to title attribute of context element
			</td>
			<th width="10%">confirm</th>
			<td width="40%"><input id="confirm" type="checkbox" checked="checked" />If this checkbox with uncheck(false), display OK button only</td>
		</tr>
		<tr>
			<th>modal</th>
			<td><input id="modal" type="checkbox" checked="checked" />If this checkbox with uncheck(false), do not display modal overlay layer</td>
			<th>button</th>
			<td><input id="button" type="checkbox" checked="checked" />If this checkbox with uncheck(false), do not display button bar</td>
		</tr>
		<tr>
			<th>width</th>
			<td><input id="width" type="text" value="0" /> Popup contents width, 0 is auto width</td>
			<th>height</th>
			<td><input id="height" type="text" value="0" /> Popup contents height, 0 is auto height</td>
		</tr>
		<tr>
			<th>onOk</th>
			<td><textarea id="onOk">function() {
	N.log("Ok");
}</textarea><br />Callback function for Ok button event</td>
			<th>onCancel</th>
			<td><textarea id="onCancel">function() {
	N.log("Cancel");
}</textarea><br />callback function for Cancel button event</td>
		</tr>
	</table>

	<div class="btnBox" align="center">
		<a id="btnInitLocal" href="#" data-opts='{ "color": "gray", "size": "large" }'>Initialize popup</a>
		<a id="btnOpenLocal" href="#" data-opts='{ "color": "skyblue", "size": "large", "disable": true }'>open</a>
		<a id="btnReload" href="#" data-opts='{ "color": "white", "size": "large" }'>Reload this block page</a>
	</div>

	<p class="smallContTit">Target Element : </p>
    <div align="center" class="result" style="height: 120px;padding-top: 30px;">
		<table id="loginForm" title="로그인" style="width: 276px;">
			<tr>
				<th style="width: 70px;"><label for="numeric">아이디</label></th>
				<td style="width: 148px;">
					<input id="userId" type="text" style="width: 95%;" maxlength="10" />
				</td>
				<td style="width: 58px;" rowspan="2">
					<a id="btnLogin" data-opts='{ "color": "skyblue", "size": "large"'>로그인</a>
				</td>
			</tr>
			<tr>
				<th><label for="generic">패스워드</label></th>
				<td>
					<input id="userPw" type="password" style="width: 95%;" maxlength="16" />
				</td>
			</tr>
		</table>
    </div>

	<h4>2) Create popup with other page load</h4>
	<p class="smallContTit">Default options : </p>
	<table id="otherPage" class="form">
		<tr>
			<th>url</th>
			<td colspan="3"><input id="url" type="text" value="html/apid/select.html" /></td>
		</tr>
		<tr>
			<th width="10%">title</th>
			<td width="40%"><input id="title" type="text" value="Popup test" />
				<br />&nbsp;this is also possible to title attribute of context element
			</td>
			<th width="10%">confirm</th>
			<td width="40%"><input id="confirm" type="checkbox" checked="checked" />If this checkbox with uncheck(false), display OK button only</td>
		</tr>
		<tr>
			<th>modal</th>
			<td><input id="modal" type="checkbox" checked="checked" />If this checkbox with uncheck(false), do not display modal overlay layer</td>
			<th>button</th>
			<td><input id="button" type="checkbox" checked="checked" />If this checkbox with uncheck(false), do not display button bar</td>
		</tr>
		<tr>
			<th>width</th>
			<td><input id="width" type="text" value="500" /> Popup contents width, 0 is auto width(default)</td>
			<th>height</th>
			<td><input id="height" type="text" value="400" /> Popup contents height, 0 is auto height(default)</td>
		</tr>
		<tr>
			<th>preload</th>
			<td colspan="3"><input id="preload" type="checkbox" /> If this checkbox with check(true), load popup contents when popup is initialized, but with unchecked(false), load popup contens when first open</td>
		</tr>
		<tr>
			<th>onOk</th>
			<td><textarea id="onOk"></textarea><br />Callback function for Ok button event</td>
			<th>onCancel</th>
			<td><textarea id="onCancel">function() {
	N.log("Cancel");
}</textarea><br />callback function for Cancel button event</td>
		</tr>
		<tr>
			<th>onOpen</th>
			<td><input id="onOpen" type="text" value="onOpen" /><br />
			The method of this value is run whenever open the popup, that must be defined in Controller's method in loaded popup contens</td>
			<th>onOpenData</th>
			<td><textarea id="onOpenData">This value is sent to onOpen callback functions argument of popup's Controller</textarea></td>
		</tr>
		<tr>
			<th>onClose</th>
			<td><textarea id="onClose">function(onCloseData) {
	N.log(N.json.format(onCloseData));
}</textarea><br /></td>
			<th>onCloseData</th>
			<td><textarea id="onCloseData">This value is sent to onClose callback functions argument of parent page</textarea><br /></td>
		</tr>
	</table>
    <div class="btnBox" align="center">
		<a id="btnInitOther" href="#" data-opts='{ "color": "gray", "size": "large" }'>Initialize popup</a>
		<a id="btnOpenOther" href="#" data-opts='{ "color": "skyblue", "size": "large", "disable": true }'>open</a>
		<a id="btnReload" href="#" data-opts='{ "color": "white", "size": "large" }'>Reload this block page</a>
	</div>
</article>

<script type="text/javascript">
	N("article#popup").cont({
		localPopup : null,
		otherPopup : null,
	    init : function(view, request) {
	    	// initialize buttons in div.btnBox
	    	this.initButton(view);

	    	// bind events
	    	this.setEvents(view, this);
	    },
	    initButton : function(view) {
	    	N("div.btnBox a", view).button();
	    	N("#btnLogin", view).button();
	    	N("#btnLogin", view).css("padding-top", "15px");
	    	N("#btnLogin", view).css("padding-bottom", "15px");
	    },
	    setEvents : function(view, this_) {
	    	N("#btnInitLocal", view).click(function(e) {
	            e.preventDefault();

	            var opts = {
	            	title : N.string.trimToNull(N("table#localPage input#title", view).val()) !== null ?
	            			N("table#localPage input#title", view).val() : undefined,
	       			confirm : N("table#localPage input#confirm", view).is(":checked"),
	            	modal : N("table#localPage input#modal", view).is(":checked"),
	            	button : N("table#localPage input#button", view).is(":checked"),
	            	width : Number(N("table#localPage input#width", view).val()),
	            	height : Number(N("table#localPage input#height", view).val()),
	            	onOk : N.string.trimToNull(N("table#localPage textarea#onOk", view).val()) !== null ?
	            			eval("(" + N("table#localPage textarea#onOk", view).val() + ")") : null,
	            	onCancel : N.string.trimToNull(N("table#localPage textarea#onCancel", view).val()) !== null ?
	            			eval("(" + N("table#localPage textarea#onCancel", view).val() + ")") : null
	            };

	            this_.localPopup = N(N("input#context", view).val()).popup(opts);

	            N("#btnOpenLocal", view).instance("button").enable();
	            N(this).instance("button").disable();
	        });

	        N("#btnOpenLocal", view).click(function(e) {
	            e.preventDefault();
	            this_.localPopup.open();
	        });

	        N("#btnInitOther", view).click(function(e) {
	            e.preventDefault();

	            var opts = {
	            	url : N("table#otherPage input#url", view).val(),
	            	title : N.string.trimToNull(N("table#otherPage input#title", view).val()) !== null ?
	            			N("table#otherPage input#title", view).val() : undefined,
	       			confirm : N("table#otherPage input#confirm", view).is(":checked"),
	            	modal : N("table#otherPage input#modal", view).is(":checked"),
	            	button : N("table#otherPage input#button", view).is(":checked"),
	            	width : Number(N("table#otherPage input#width", view).val()),
	            	height : Number(N("table#otherPage input#height", view).val()),
	            	onOk : N.string.trimToNull(N("table#otherPage textarea#onOk", view).val()) !== null ?
	            			eval("(" + N("table#otherPage textarea#onOk", view).val() + ")") : null,
	            	onCancel : N.string.trimToNull(N("table#otherPage textarea#onCancel", view).val()) !== null ?
	            			eval("(" + N("table#otherPage textarea#onCancel", view).val() + ")") : null,
	       			preload : N("table#otherPage input#preload", view).is(":checked"),
	       			onOpen : N.string.trimToNull(N("table#otherPage input#onOpen", view).val()),
	       			onOpenData : N.string.trimToNull(N("table#otherPage textarea#onOpenData", view).val()),
	            	onClose : N.string.trimToNull(N("textarea#onClose", view).val()) !== null ?
	            			eval("(" + N("table#otherPage textarea#onClose", view).val() + ")") : null,
	            	onCloseData : N.string.trimToNull(N("table#otherPage textarea#onCloseData", view).val())
	            };

	            this_.otherPopup = N().popup(opts);

	            N("#btnOpenOther", view).instance("button").enable();
	            N(this).instance("button").disable();
	        });

	        N("#btnOpenOther", view).click(function(e) {
	            e.preventDefault();
	            this_.otherPopup.open();
	        });

	        N("a[id='btnReload']", view).click(function(e) {
	        	e.preventDefault();
	        	N(view.parent()).comm(this_.request.get("url")).submit();
	        });
	    }
	});
</script>