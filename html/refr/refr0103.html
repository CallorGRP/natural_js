<article id="refr0103" class="apiDoc">
	<h1>Natural-ARCHITECTURE</h1>

<div id="naTab">
<ul>
	<li><a href="#tab1">Controller</a></li>
	<li><a href="#tab2">Communicator</a></li>
	<li><a href="#tab3">Context</a></li>
	<li><a href="#tab4">Config</a></li>
</ul>
<div id="tab1">
	<h2>Controller(N.cont)</h2>

	<h3>가. 개요</h3>
	<p>Controller(이하 N.cont) 는 CVC Architecture Pattern(이하 CVC 패턴)의 Controller 영역을 구현한 클래스로서 Communicator 와 View 를 연결 해 주고 View 의 HTML 요소(element)들을 제어하는 역할을 합니다.</p>
	<p>N.cont 는 다음과 같이 페이지의 View 영역 바로 아래 선언 되어야 합니다.</p>
	<pre><code>&lt;div id="view"&gt;
	&lt;p&gt;View 영역&lt;/p&gt;
&lt;/div&gt;

&lt;script type=&quot;text/javascript&quot;&gt;
	N(&quot;div#view&quot;).cont({
		init : function(view, request) {
			//JSON 형태의 Class 로 정의
		}
	});
&lt;/script&gt;</code></pre>
	<p>
		위와 같이 N.cont 를 선언하면 View 영역의 Load 가 완료된 후 N.cont의 인자로 들어온 Controller 클래스에 init 메서드가 정의 되어 있다면 init 메서드를 프레임워크에서 실행 시켜 줍니다.
		init 의 인자(Arguments)로는 View영역의 HTML 요소들이 담긴 JWS 객체와 Communicator.request(Communicator 참조) 객체를 넣어 줍니다.
		또한 Controller Class 의 초기화(Initialize)가 완료되면 View영역의 최상위 Element 에 해당 Controller 인스턴스(instance)를 넣어줘 N("페이지 최상위 Element").instance("cont") 로 View 영역에서 참조 할 수 있습니다.
	</p>

	<h3>나. 생성자(Constructor)</h3>
	<table class="form">
		<tr>
			<th>Name</th>
			<th>Arguments</th>
			<th>Type</th>
			<th>Return</th>
			<th style="width: auto;">Description</th>
		</tr>
		<tr>
			<td>N.cont</td>
			<td align="center">-</td>
			<td align="center">-</td>
			<td>(Controller)callback</td>
			<td>
				<p>Controller를 초기화 합니다.</p>
				<p>N.cont는 컨트롤러 클래스를 등록하고 관리 해 주는 역할을 수행 합니다.</p>
			</td>
		</tr>
		<tr>
			<td></td>
			<td>obj</td>
			<td>JWS</td>
			<td align="center">-</td>
			<td>View 영역을 selector로 지정 합니다.</td>
		</tr>
		<tr>
			<td></td>
			<td>callback</td>
			<td>JSON Object Class</td>
			<td align="center">-</td>
			<td>Controller 클래스를 등록 합니다.</td>
		</tr>
		<tr>
			<td>N(selector).cont</td>
			<td align="center">-</td>
			<td align="center">-</td>
			<td align="center">-</td>
			<td>
				<p>N.cont를 플러그인 방식으로의 초기화 방식입니다.</p>
				<p>N.cont 와 동작되는 로직은 같으며 실제 N() 의 인자로 들어온 값이 N.cont()의 첫 번째 인자로 지정 됩니다.</p>
				<p>이와같은 방식으로 사용하면 컴포넌트를 초기화하는 여러 가지 설정들을 자동으로 세팅해 주므로 Natural-JS 에서는 이와같은 방식의 사용을 추천합니다.</p>
			</td>
		</tr>
		<tr>
			<td></td>
			<td>callback</td>
			<td>JSON Object Class</td>
			<td align="center">-</td>
			<td>N.cont 의 callback 인자(argument) 와 같습니다.</td>
		</tr>
	</table>

	<h3>다. Controller 기본 함수(callback default method)</h3>
	<table class="form">
		<tr>
			<th>Name</th>
			<th>Arguments</th>
			<th>Type</th>
			<th>Return</th>
			<th style="width: auto;">Description</th>
		</tr>
		<tr>
			<td>init</td>
			<td align="center">-</td>
			<td align="center">-</td>
			<td>User define</td>
			<td>N.cont 에 의해 등록된 callback 이 초기화 된 후 최초 실행 되는 함수입니다.</td>
		</tr>
		<tr>
			<td></td>
			<td>view</td>
			<td>JWS</td>
			<td align="center">-</td>
			<td>View 영역의 요소들을 반환 합니다.</td>
		</tr>
		<tr>
			<td></td>
			<td>request</td>
			<td>Communicator.request instance</td>
			<td align="center">-</td>
			<td colspan="2">Communicator.request 인스턴스를 반환하여 현재 페이지의 요청 정보를 볼 수 있습니다.</td>
		</tr>
	</table>


</div>

<div id="tab2">
	<h2>Communicator(N.comm)</h2>

	<h3>가. 개요</h3>
	<p>Communicator(이하 N.comm) 는 CVC 패턴의 Communicator 영역을 구현한 클래스로서 서버와의 통신을 담당하는 Natural-JS의 공통모듈입니다. Communicator 는 jQuery,ajax 모듈을 사용해서 Ajax로 서버와의 통신을 합니다. Ajax 통신외에 요청마다 Communicator.request 객체가 생성되어 웹 UI 안의 논리적인 페이지(탭, 임베드, 팝업등)의 Controller간 데이터를 송·수신 할 수 있고 불러온 페이지의 Controller 에서 요청정보를 확인 할 수 있습니다.</p>

	<h3>나. 생성자(Constructor)</h3>
	<table class="form">
		<tr>
			<th>Name</th>
			<th>Arguments</th>
			<th>Type</th>
			<th>Return</th>
			<th style="width: auto;">Description</th>
		</tr>
		<tr>
			<td>N.comm</td>
			<td align="center">-</td>
			<td align="center">-</td>
			<td>N.comm</td>
			<td>N.comm 객체를 생성 합니다.</td>
		</tr>
		<tr>
			<td></td>
			<td>obj</td>
			<td>JWS(selector or element) or Object(JSON) or  JWS(Object(JSON))</td>
			<td align="center">-</td>
			<td>
				<p>JWS(selector or element) 형태의 인자로 지정하고 두 번째인자로 특정 페이지의 URL을 지정하면 가져온 HTML 컨텐츠를 지정한 요소 안에 넣어줍니다.</p>
				<p>Object(JSON)  형태의 인자로 지정하면 Communicator.request 의 옵션으로 지정 됩니다.</p>
				<p>JWS(Object(JSON)) 형태의 인자로 지정하면 지정한 값을 서버로 전송한 파라미터로 인식하여 서버에 요청을 보낼 때 전송 해 줍니다.</p>
				<p>* PAGE: </p>
				<pre><code>N.comm(N("#contents"), "page.html").submit()</code></pre>
				<p>* DATA: </p>
				<pre><code>N.comm("data.json").submit(function(data) {})</code></pre>
			</td>
		</tr>
		<tr>
			<td></td>
			<td>url</td>
			<td>String</td>
			<td align="center">-</td>
			<td>호출할 URL을 지정 합니다.</td>
		</tr>
		<tr>
			<td>N(obj).comm</td>
			<td align="center">-</td>
			<td align="center">-</td>
			<td>N.comm</td>
			<td>
				<p>N.comm을 플러그인 방식으로의 초기화 방식입니다.</p>
				<p>N.comm과 동작되는 로직은 같으며 실제 N() 의 인자로 들어온 값이 N.comm()의 첫 번째 인자로 지정 됩니다.</p>
			</td>
		</tr>
		<tr>
			<td></td>
			<td>url</td>
			<td>String</td>
			<td align="center">-</td>
			<td>N.comm 의 url 인자 와 같습니다.</td>
		</tr>
	</table>

	<h3>다. 기본옵션(Default options)</h3>
	<p>obj(arguments[0])가 JSON 오브젝트 타입의 옵션이면 Communicator.request(이하 request) 가 생성되어서 request 의 옵션으로 지정 됩니다. request 의 기본옵션 부분을과 동일하므로 "마. Communicator.request"의 기본옵션 부분을 참고하기 바랍니다.</p>

	<h3>라. 함수(Methods)</h3>
	<table class="form">
		<tr>
			<th>Name</th>
			<th>Arguments</th>
			<th>Type</th>
			<th>Return</th>
			<th style="width: auto;">Description</th>
		</tr>
		<tr>
			<td>submit</td>
			<td align="center">-</td>
			<td align="center">-</td>
			<td>N.comm</td>
			<td>컨트롤러의 실행정보가 정의되어 초기화 된 다음 서버에 요청을 보내는 메서드입니다.</td>
		</tr>
		<tr>
			<td></td>
			<td>callback</td>
			<td>Function</td>
			<td align="center">-</td>
			<td>서버에서 요청이 처리되고 응답이 완료된 다음 실행되는 콜백 함수입니다.</td>
		</tr>
	</table>

	<h3>마. Communicator.request</h3>

	<h4>1) 개요</h4>
	<p>Communicator.request(이하 request) 는 단독으로 사용될 수 없고 N.comm 으로 요청을 보낼때마다 N.comm 에 의해서 생성 되는 모듈입니다. request는 요청에 대한 옵션을 지정 할 수 있고 요청정보를 가지고 있고 페이지간 데이터 전달을 위한 attr 메서드가 구현 되어 있습니다. </p>

	<h4>2) 생성자(Constructor)</h4>
	<p>개발시 직접 컨트롤 할 수 없고 Communicator 에 의해 자동 생성되므로 설명을 생략 합니다.</p>

	<h4>3) 기본옵션(Default options)</h4>
	<table class="form">
		<tr>
			<th>Name</th>
			<th>Type</th>
			<th>Default</th>
			<th>Required</th>
			<th style="width: auto;">Description</th>
		</tr>
		<tr>
			<td>contentType</td>
			<td>String</td>
			<td>application/json; charset=utf-8</td>
			<td>true</td>
			<td>Ajax request 에 대한 contentType을 지정 합니다(jQuery.ajax 의 옵션)</td>
		</tr>
		<tr>
			<td>cache</td>
			<td>boolean</td>
			<td>false</td>
			<td></td>
			<td>브라우저 캐시 적용 유무(jQuery.ajax 의 옵션)</td>
		</tr>
		<tr>
			<td>async</td>
			<td>boolean</td>
			<td>true</td>
			<td></td>
			<td>Ajax 요청을 비동기 방식으로 처리할지 동기방식으로 처리할지 지정 합니다(jQuery.ajax 의 옵션)</td>
		</tr>
		<tr>
			<td>type</td>
			<td>String</td>
			<td>POST</td>
			<td></td>
			<td>Ajax 요청에 대한 method를 지정 합니다(jQuery.ajax 의 옵션</td>
		</tr>
		<tr>
			<td>data</td>
			<td>JSON Array<sup>9)</sup> or JSON object</td>
			<td>null</td>
			<td></td>
			<td>요청시 파라미터를 지정 합니다(jQuery.ajax 의 옵션)</td>
		</tr>
		<tr>
			<td>dataType</td>
			<td>String</td>
			<td>"json"</td>
			<td></td>
			<td>응답받을 데이터의 형태를 지정합니다(jQuery.ajax 의 옵션)</td>
		</tr>
		<tr>
			<td>urlSync</td>
			<td>boolean</td>
			<td>true</td>
			<td></td>
			<td>요청할때의 페이지 URL 과 요청받을때의 페이지 URL 이 같은지 비교하여 다르면 응답을 차단 합니다.</td>
		</tr>
		<tr>
			<td>crossDomain</td>
			<td>boolean</td>
			<td>false</td>
			<td></td>
			<td>JSONP 같은 기술을 사용하여 다른 도메인의 자원을 가져오게 할지 여부를 설정 합니다(jQuery.ajax 의 옵션).</td>
		</tr>
		<tr>
			<td>append</td>
			<td>boolean</td>
			<td>false</td>
			<td></td>
			<td>HTML 컨텐츠를 가져올 때 지정한 영역에 더할건지 덮어 쓸건지를 결정 합니다.</td>
		</tr>
		<tr>
			<td>effect</td>
			<td>boolean or Array</td>
			<td>false</td>
			<td></td>
			<td>
				<p>HTML 컨텐츠를 가져올 때 전환 효과를 보여줄지 여부를 설정 합니다.</p>
				<p>효과를 적용하지 않으려면 false를 입력하고 효과를 입력하려면 다음과 같이 입력합니다.</p>
				<p>["효과명", "시간(ms)", "효과가 끝날 때 마다 실행될 콜백함수"]</p>
				<pre><code>["slideDown", 300, null]</code></pre>
			</td>
		</tr>
	</table>
	<p>※ 위 기본옵션 외에 N.comm은 jQuery $.ajax 모듈을 사용하여 $.ajax에서 제공하는 옵션중 이벤트콜백 관련 부분(beforeSend, success, error, complete)을 제외한 모든 옵션을 그대로 제공합니다.</p>

	<h4>4) 함수(Methods)</h4>
	<table class="form">
		<tr>
			<th>Name</th>
			<th>Arguments</th>
			<th>Type</th>
			<th>Return</th>
			<th style="width: auto;">Description</th>
		</tr>
		<tr>
			<td>attr</td>
			<td align="center">-</td>
			<td align="center">-</td>
			<td>Controller.request or Value object</td>
			<td colspan="2">
				<p>호출한 페이지에 값을 전달할 때 사용합니다.</p>
				<p>* 값전달 : </p>
				<pre><code>N(selector).comm(url).request.attr("param", { paramA : "A" }).submit()</code></pre>
				<p>* 전달된 값 참고 : </p>
				<pre><code>(호출된 페이지의 Controller).request.attr("param")</code></pre>
			</td>
		</tr>
		<tr>
			<td></td>
			<td>name</td>
			<td>String</td>
			<td align="center">-</td>
			<td>전달할 값의 key를 입력 합니다.</td>
		</tr>
		<tr>
			<td></td>
			<td>obj</td>
			<td>Object</td>
			<td align="center">-</td>
			<td>전달할 값에 해당하는 object를 지정 한다. obj 인자를 지정하지 않으면 값을 가져오고 지정하면 해당 값으로 저장합니다.</td>
		</tr>
		<tr>
			<td>param</td>
			<td align="center">-</td>
			<td align="center">-</td>
			<td>String</td>
			<td>현재 페이지의 URL에 표출된 GET 파라미터에서 값을 추출 합니다.</td>
		</tr>
		<tr>
			<td></td>
			<td>name</td>
			<td>String</td>
			<td align="center">-</td>
			<td>GET 파라미터의 name을 지정한다. 지정하지 않으면 GET 파라미터 전체 값을 JSON Object 형태로 반환 합니다.</td>
		</tr>
		<tr>
			<td>get</td>
			<td align="center">-</td>
			<td align="center">-</td>
			<td>Value Object</td>
			<td>요청마다 생성되는 request 객체에서 요청정보를 가져옵니다.</td>
		</tr>
		<tr>
			<td></td>
			<td>key</td>
			<td>String</td>
			<td align="center">-</td>
			<td>key를 지정하지 않으면 전체 요청정보를 가져오고 key 값을 지정하면 해당 정보만 가져옵니다. key 값은 기본옵션과 같고 referrer(호출한 페이지 URL) 값만 추가 됩니다.</td>
		</tr>
	</table>

	<fieldset>
		<legend>주석</legend>
		<ul class="footnotes">
			<li>9) JSON object 가 담겨있는 Aray 객체</li>
		</ul>
	</fieldset>

	<h3>바. API DEMO</h3>
	<div data-page="communicator" class="apidemo"></div>
</div>

<div id="tab3">
	<h2>Context(N.context)</h2>

	<h3>가. 개요</h3>
	<p>Context(이하 N.context)는 Natural-JS 의 생명주기(Life-Cycle, 페이지가 표시되고 다른페이지로 redirect 되기 전까지) 안 에서의 데이터 저장소 역할을 합니다. Natural-JS 의 환경설정 값(Config)과 메시지등이 N.context 객체에 저장 됩니다.</p>

	<h3>나. 함수(Methods)</h3>
	<table class="form">
		<tr>
			<th>Name</th>
			<th>Arguments</th>
			<th>Type</th>
			<th>Return</th>
			<th style="width: auto;">Description</th>
		</tr>
		<tr>
			<td>attr</td>
			<td align="center">-</td>
			<td align="center">-</td>
			<td>N.comm</td>
			<td></td>
		</tr>
		<tr>
			<td></td>
			<td>name</td>
			<td>String</td>
			<td align="center">-</td>
			<td>저장할 값의 key를 입력 합니다.</td>
		</tr>
		<tr>
			<td></td>
			<td>obj</td>
			<td>Object</td>
			<td align="center">-</td>
			<td>저장할 값에 해당하는 object를 지정 한다. obj 인자를 지정하지 않으면 값을 가져오고 지정하면 해당 값으로 저장합니다.</td>
		</tr>
	</table>
</div>

<div id="tab4">
	<h2>Config(natural.config.js)</h2>

	<h3>가. 개요</h3>
	<p>Natural-JS 의 환경설정 파일입니다. 설정값은 N.context 에 저장 되며 각 패키지 별로 따로 저장 됩니다. </p>

	<ul>
		<li>N.context.attr(&quot;core&quot;) : Natural-CORE 패키지에 속한 라이브러리들의 기본 설정 값.</li>
		<li>N.context.attr(&quot;architecture&quot;) : Natural-ARCHITECTURE 패키지에 속한 라이브러리들의 기본 설정 값. </li>
		<li>N.context.attr(&quot;data&quot;) : Natural-DATA 패키지에 속한 라이브러리들의 기본 설정 값.</li>
		<li>N.context.attr(&quot;ui&quot;) : Natural-UI 패키지에 속한 라이브러리들의 기본 설정 값.</li>
	</ul>

	<!-- TODO 세부 설정값에 대한 설명 추가 -->
	<p>세부 설정값에 대한 내용은 각 컴포넌트와 라이브러리별 기본옵션과 natural.config.js 파일 안의 설명을 참고하기 바랍니다.</p>

</div>
</div>

<hr />

<h2>문서 바로가기</h2>
<ul class="links">
	<li><a class="link" href="/natural_js#refr/refr0101">API 문서 개요</a></li>
	<li><a class="link" href="/natural_js#refr/refr0102">Natural-CORE</a></li>
	<li><p>Natural-ARCHITECTURE</p></li>
	<li><a class="link" href="/natural_js#refr/refr0104">Natural-DATA</a></li>
	<li><a class="link" href="/natural_js#refr/refr0105">Natural-UI</a></li>
</ul>

</article>

<script type="text/javascript">
N("article#refr0103").cont({
    init : function(view, request) {
    	N("div#naTab", view).tab();
    }
});
</script>