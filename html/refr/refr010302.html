<article id="refr010302" class="apiDoc">
	<h2>Communicator(N.comm)</h2>

	<h3>개요</h3>
	<p>Communicator(이하 N.comm) 는 CVC 패턴의 Communicator 영역을 구현한 클래스로서 서버와의 통신을 담당하는 Natural-JS의 공통모듈입니다. Communicator 는 jQuery,ajax 모듈을 사용해서 Ajax로 서버와의 통신을 합니다. Ajax 통신외에 요청마다 Communicator.request 객체가 생성되어 웹 UI 안의 논리적인 페이지(탭, 임베드, 팝업등)의 Controller간 데이터를 송·수신 할 수 있고 불러온 페이지의 Controller 에서 요청정보를 확인 할 수 있습니다.</p>

	<h3>API DEMO</h3>
	<div data-page="communicator" class="apidemo"></div>

	<h3>생성자(Constructor)</h3>
	<table>
		<tr>
			<th>Name</th>
			<th>Arguments</th>
			<th>Type</th>
			<th>Return</th>
			<th style="width: auto;">Description</th>
		</tr>
		<tr>
			<td>N.comm</td>
			<td align="center">-</td>
			<td align="center">-</td>
			<td>N.comm</td>
			<td>N.comm 객체를 생성 합니다.</td>
		</tr>
		<tr>
			<td></td>
			<td>obj</td>
			<td>jQuery Object(selector or element) or Object(JSON) or  jQuery Object(Object(JSON))</td>
			<td align="center">-</td>
			<td style="max-width: 299px;">
				<p>jQuery Object(selector or element) 형태의 인자로 지정하고 두 번째인자로 특정 페이지의 URL을 지정하면 가져온 HTML 컨텐츠를 지정한 요소 안에 넣어줍니다.</p>
				<p>Object(JSON)  형태의 인자로 지정하면 Communicator.request 의 옵션으로 지정 됩니다.</p>
				<p>jQuery Object(Object(JSON)) 형태의 인자로 지정하면 지정한 값을 서버로 전송한 파라미터로 인식하여 서버에 요청을 보낼 때 전송 해 줍니다.</p>
				<p>* PAGE: </p>
				<pre><code class="language-javascript">N.comm(N("#contents"), "page.html").submit()</code></pre>
				<p>* DATA: </p>
				<pre><code class="language-javascript">N.comm("data.json").submit(function(data) {})</code></pre>
			</td>
		</tr>
		<tr>
			<td></td>
			<td>url</td>
			<td>String</td>
			<td align="center">-</td>
			<td>호출할 URL을 지정 합니다.</td>
		</tr>
		<tr>
			<td>N(obj).comm</td>
			<td align="center">-</td>
			<td align="center">-</td>
			<td>N.comm</td>
			<td>
				<p>N.comm을 플러그인 방식으로의 초기화 방식입니다.</p>
				<p>N.comm과 동작되는 로직은 같으며 실제 N() 의 인자로 들어온 값이 N.comm()의 첫 번째 인자로 지정 됩니다.</p>
			</td>
		</tr>
		<tr>
			<td></td>
			<td>url</td>
			<td>String</td>
			<td align="center">-</td>
			<td>N.comm 의 url 인자 와 같습니다.</td>
		</tr>
	</table>

	<h3>기본옵션(Default options)</h3>
	<p>obj(arguments[0])가 JSON 오브젝트 타입의 옵션이면 Communicator.request(이하 request) 가 생성되어서 request 의 옵션으로 지정 됩니다. request 의 기본옵션 부분을과 동일하므로 "마. Communicator.request"의 기본옵션 부분을 참고하기 바랍니다.</p>

	<h3>함수(Methods)</h3>
	<table>
		<tr>
			<th>Name</th>
			<th>Arguments</th>
			<th>Type</th>
			<th>Return</th>
			<th style="width: auto;">Description</th>
		</tr>
		<tr>
			<td>submit</td>
			<td align="center">-</td>
			<td align="center">-</td>
			<td>N.comm</td>
			<td>컨트롤러의 실행정보가 정의되어 초기화 된 다음 서버에 요청을 보내는 메서드입니다.</td>
		</tr>
		<tr>
			<td></td>
			<td>callback</td>
			<td>Function</td>
			<td align="center">-</td>
			<td>서버에서 요청이 처리되고 응답이 완료된 다음 실행되는 콜백 함수입니다. 콜백함수의 첫번째 인자(arguments[0])에는 서버에서 가져온 data 를 넣어 주고 두번째 인자(arguments[1])에는 요청정보가 담긴 Communicator.request 객체를 넣어줍니다.</td>
		</tr>
	</table>

	<h3>Communicator.request</h3>

	<h4>1) 개요</h4>
	<p>Communicator.request(이하 request) 는 단독으로 사용될 수 없고 N.comm 으로 요청을 보낼때마다 N.comm 에 의해서 생성 되는 모듈입니다. request는 요청에 대한 옵션을 지정 할 수 있고 요청정보를 가지고 있고 페이지간 데이터 전달을 위한 attr 메서드가 구현 되어 있습니다. </p>

	<h4>2) 생성자(Constructor)</h4>
	<p>개발시 직접 컨트롤 할 수 없고 Communicator 에 의해 자동 생성되므로 설명을 생략 합니다.</p>

	<h4>3) 기본옵션(Default options)</h4>
	<table>
		<tr>
			<th>Name</th>
			<th>Type</th>
			<th>Default</th>
			<th>Required</th>
			<th style="width: auto;">Description</th>
		</tr>
		<tr>
			<td>contentType</td>
			<td>String</td>
			<td>application/json; charset=utf-8</td>
			<td>true</td>
			<td>Ajax request 에 대한 contentType을 지정 합니다(jQuery.ajax 의 옵션)</td>
		</tr>
		<tr>
			<td>cache</td>
			<td>boolean</td>
			<td>false</td>
			<td></td>
			<td>브라우저 캐시 적용 유무(jQuery.ajax 의 옵션)</td>
		</tr>
		<tr>
			<td>async</td>
			<td>boolean</td>
			<td>true</td>
			<td></td>
			<td>Ajax 요청을 비동기 방식으로 처리할지 동기방식으로 처리할지 지정 합니다(jQuery.ajax 의 옵션)</td>
		</tr>
		<tr>
			<td>type</td>
			<td>String</td>
			<td>POST</td>
			<td></td>
			<td>Ajax 요청에 대한 method를 지정 합니다(jQuery.ajax 의 옵션</td>
		</tr>
		<tr>
			<td>data</td>
			<td>JSON Array<sup>9)</sup> or JSON object</td>
			<td>null</td>
			<td></td>
			<td>요청시 파라미터를 지정 합니다(jQuery.ajax 의 옵션)</td>
		</tr>
		<tr>
			<td>dataType</td>
			<td>String</td>
			<td>"json"</td>
			<td></td>
			<td>응답받을 데이터의 형태를 지정합니다(jQuery.ajax 의 옵션)</td>
		</tr>
		<tr>
			<td>urlSync</td>
			<td>boolean</td>
			<td>true</td>
			<td></td>
			<td>요청할때의 페이지 URL 과 요청받을때의 페이지 URL 이 같은지 비교하여 다르면 응답을 차단 합니다.</td>
		</tr>
		<tr>
			<td>crossDomain</td>
			<td>boolean</td>
			<td>false</td>
			<td></td>
			<td>JSONP 같은 기술을 사용하여 다른 도메인의 자원을 가져오게 할지 여부를 설정 합니다(jQuery.ajax 의 옵션).</td>
		</tr>
		<tr>
			<td>append</td>
			<td>boolean</td>
			<td>false</td>
			<td></td>
			<td>HTML 컨텐츠를 가져올 때 지정한 영역에 더할건지 덮어 쓸건지를 결정 합니다.</td>
		</tr>
		<tr>
			<td>effect</td>
			<td>boolean or Array</td>
			<td>false</td>
			<td></td>
			<td style="max-width: 299px;">
				<p>HTML 컨텐츠를 가져올 때 전환 효과를 보여줄지 여부를 설정 합니다.</p>
				<p>효과를 적용하지 않으려면 false를 입력하고 효과를 입력하려면 다음과 같이 입력합니다.</p>
				<p>["이펙트", "시간(ms)", "이펙트가 끝날 때 마다 실행 될 콜백함수"]</p>
				<pre><code class="language-javascript">["slideDown", 300, null]</code></pre>
				<p>이펙트 종류 : show, hide, slideUp, slideDown, fadeIn, fadeOut</p>
			</td>
		</tr>
	</table>
	<p>※ 위 기본옵션 외에 N.comm은 jQuery $.ajax 모듈을 사용하여 $.ajax에서 제공하는 옵션중 이벤트콜백 관련 부분(beforeSend, success, error, complete)을 제외한 모든 옵션을 그대로 제공합니다.</p>

	<h4>4) 함수(Methods)</h4>
	<table>
		<tr>
			<th>Name</th>
			<th>Arguments</th>
			<th>Type</th>
			<th>Return</th>
			<th style="width: auto;">Description</th>
		</tr>
		<tr>
			<td>attr</td>
			<td align="center">-</td>
			<td align="center">-</td>
			<td>Controller.request or Value object</td>
			<td style="max-width: 299px;">
				<p>호출한 페이지에 값을 전달할 때 사용합니다.</p>
				<p>* 값전달 : </p>
				<pre><code class="language-javascript">N(selector).comm(url).request.attr("param", { paramA : "A" }).submit()</code></pre>
				<p>* 전달된 값 참고 : </p>
				<pre><code class="language-javascript">(호출된 페이지의 Controller).request.attr("param")</code></pre>
			</td>
		</tr>
		<tr>
			<td></td>
			<td>name</td>
			<td>String</td>
			<td align="center">-</td>
			<td>전달할 값의 key를 입력 합니다.</td>
		</tr>
		<tr>
			<td></td>
			<td>obj</td>
			<td>Object</td>
			<td align="center">-</td>
			<td>전달할 값에 해당하는 object를 지정 한다. obj 인자를 지정하지 않으면 값을 가져오고 지정하면 해당 값으로 저장합니다.</td>
		</tr>
		<tr>
			<td>param</td>
			<td align="center">-</td>
			<td align="center">-</td>
			<td>String</td>
			<td>현재 페이지의 URL에 표출된 GET 파라미터에서 값을 추출 합니다.</td>
		</tr>
		<tr>
			<td></td>
			<td>name</td>
			<td>String</td>
			<td align="center">-</td>
			<td>GET 파라미터의 name을 지정한다. 지정하지 않으면 GET 파라미터 전체 값을 JSON Object 형태로 반환 합니다.</td>
		</tr>
		<tr>
			<td>get</td>
			<td align="center">-</td>
			<td align="center">-</td>
			<td>Value Object</td>
			<td>요청마다 생성되는 request 객체에서 요청정보를 가져옵니다.</td>
		</tr>
		<tr>
			<td></td>
			<td>key</td>
			<td>String</td>
			<td align="center">-</td>
			<td>key를 지정하지 않으면 전체 요청정보를 가져오고 key 값을 지정하면 해당 정보만 가져옵니다. key 값은 기본옵션과 같고 referrer(호출한 페이지 URL) 값만 추가 됩니다.</td>
		</tr>
	</table>

	<fieldset>
		<legend>주석</legend>
		<ul class="footnotes">
			<li>9) JSON object 가 담겨있는 Aray 객체</li>
		</ul>
	</fieldset>
</article>

<script type="text/javascript">
N("article#refr010302").cont({
    init : function(view, request) {
    	// code highlight
    	if(N.browser.msieVersion() === 0 || N.browser.msieVersion() > 8) {
			view.find("code").each(function() {
				Prism.highlightElement(this);
	    	});
    	}

    	//load api demo page
    	N(".apidemo", view).each(function() {
    		N(this).comm("html/apid/" + N(this).data("page") + ".html").submit();
    	});
    }
});
</script>