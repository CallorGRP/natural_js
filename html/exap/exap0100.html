<article id="exap0100">
	<h1>Grid 와 Form, Popup 이 결합된 형태의 예제</h1>
	<div class="intro">
		<p class="smallContTit">그리드의 행을 클릭하면 클릭한 행의 데이터가 바인드된 폼이 팝업 으로 표시 됩니다.</p>
		<p class="smallContTit">폼과 그리드는 같은 데이터를 참고하고 있으므로 둘중 한쪽에서 데이터 변동이 있을 시 나머지 한쪽도 실시간으로 변경된 데이터가 동기화 됩니다.</p>
	</div>
	<br>
	<div id="defBtnBox" class="btnBox" align="center">
		<a id="btnBind" href="#" data-opts='{ "color": "skyblue", "size": "large" }'>데이터 바인드</a>
		<a id="btnModifiedData" href="#" data-opts='{ "color": "skyblue", "size": "large" }'>수정된 데이터 가져오기</a>
	</div>
	<table id="grid" class="grid" style="width: 100%;">
		<thead>
			<tr>
				<th width="9%">index</th>
				<th width="17%">name</th>
				<th width="18%">email</th>
				<th width="11%">gender</th>
				<th width="13%">eyeColor</th>
				<th width="7%">age</th>
				<th width="*">company</th>
				<th width="12%">isActive</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td id="idx"></td>
				<td id="name"></td>
				<td id="email"></td>
				<td id="gender" align="center"></td>
				<td id="eyeColor" align="center"></td>
				<td id="age"></td>
				<td id="company"></td>
				<td id="isActive" align="center"></td>
			</tr>
		</tbody>
	</table>

	<table id="form" class="form" title="폼">
		<tr>
			<th width="85" align="right"><label for="picture">picture</label></th>
			<td width="*"><img id="picture" /></td>
		</tr>
		<tr>
			<th><label for="name">name</label></th>
			<td>
				<input id="name" type="text" data-validate='[["required"]]' />
			</td>
		</tr>
		<tr>
			<th><label for="email">email</label></th>
			<td>
				<input id="email" type="text" data-format='[["trimtoempty"], ["generic", "@@@@@@＊＊＊"]]' data-validate='[["required"], ["email"]]' />
			</td>
		</tr>
		<tr>
			<th><label for="_id">password</label></th>
			<td>
				<input id="_id" type="password" data-validate='[["required"]]' />
			</td>
		</tr>
		<tr>
			<th><label for="balance">balance</label></th>
			<td>
				<input id="balance" type="text" data-format='[["trimtoempty"], ["numeric", "$#,###.##0"]]' data-validate='[["required"], ["decimal"]]' />
			</td>
		</tr>
		<tr>
			<th><label for="phone">phone</label></th>
			<td>
				<input id="phone" type="text" readonly="readonly" />
			</td>
		</tr>
		<tr>
			<th><label for="age">age</label></th>
			<td>
				<input id="age" type="text" disabled="disabled" />
				<input id="index" type="hidden" />
			</td>
		</tr>
		<tr>
			<th><label for="company">company</label></th>
			<td>
				<input id="company" type="text" data-validate='[["required"]]' />
			</td>
		</tr>
		<tr>
			<th><label for="registered">registered</label></th>
			<td id="registered" data-format='[["date", 8]]'></td>
		</tr>
		<tr>
			<th><label for="about">about</label></th>
			<td>
				<textarea id="about" data-format='[["trimtoempty"], ["limit", "50", "..."]]' data-validate='[["required"], ["korean"]]'></textarea>
			</td>
		</tr>
		<tr>
			<th><label for="greeting">about</label></th>
			<td id="greeting"></td>
		</tr>
		<tr>
			<th><label for="isActive">isActive</label></th>
			<td>
				<input id="isActive" type="checkbox" />
			</td>
		</tr>
	</table>

	<p class="smallContTit">Source Code :</p>
	<pre class="line-numbers"><code id="sourceCode" class="language-markup"></code></pre>
</article>

<script type="text/javascript">

N("article#exap0100").cont({
	grid : undefined,
	form : undefined,
    init : function(view, request) {
    	var cont = this;

    	// source Code
    	N.comm({
       		url : "html/exap/" + view.attr("id") + ".html",
       		dataType : "html"
       	}).submit(function(html) {
       		N("#sourceCode", view).text(html);
       	});

    	// initialize buttons in div.btnBox
    	N("div.btnBox a", view).button();

    	// initialize popup
    	var popup = N("table#form", view).popup({
    		modal: false
    	});

    	// initialize form
    	this.form = N([]).form("table#form", view).bind();

    	// initialize grid
    	this.grid = N([]).grid({
       		context : N("table#grid", view),
       		height : 350,
       		resizable : true,
       		sortable : true,
       		select : true,
       		hover : true,
       		windowScrollLock : true,
       		onSelect : function(i, ele, data) {
       			cont.form.bind(i, data);
       			popup.close();
       			popup.open();
       		},
       		rowHandler : function(i, nTbody, rowData) {
       			N("#idx", nTbody).text(String(i));
       		}
       	});

    	// bind events
    	this.setEvents(this, view);
    },
    setEvents : function(this_, view) {
    	N("#btnBind", view).click(function(e) {
            e.preventDefault();
            N.comm({
        		url : "html/apid/data/grid_big.json",
        		async : false
        	}).submit(function(data) {
        		console.log(data.length + " 건 조회");
        		this_.grid.bind(data);
        	});
        });

    	N("#btnModifiedData", view).click(function(e) {
    		e.preventDefault();
    		N(window).alert({
    			title : "수정된 ROW DATA",
    			msg : '<div class="pre">' + N.json.format(this_.grid.data("modified")) + '</div>',
    			width : 550,
    			height : 300
    		}).show();
    	});
    }
});
</script>